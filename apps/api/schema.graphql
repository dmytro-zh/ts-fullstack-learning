type Product {
  id: ID!
  slug: String!
  name: String!
  price: Float!
  inStock: Boolean!
  storeId: ID
  store: Store
  description: String
  imageUrl: String
  createdAt: String!
  quantity: Int!
  images: [ProductImage!]!
  isActive: Boolean!
}

type ProductImage {
  id: ID!
  key: String!
  url: String!
  width: Int
  height: Int
  mime: String!
  size: Int!
  isPrimary: Boolean!
  createdAt: String!
}

type CheckoutLink {
  id: ID!
  slug: String!
  active: Boolean!
  product: Product!
  store: Store
  createdAt: String!
}

input CheckoutInput {
  customerName: String!
  email: String!
}

input CheckoutByLinkInput {
  slug: String!
  customerName: String!
  email: String!
  quantity: Int!
  shippingAddress: String!
  shippingNote: String
}

input CheckoutLinkInput {
  slug: String!
  productId: ID!
  storeId: ID
}

input StoreInput {
  name: String!
  email: String
}

type Store {
  id: ID!
  ownerId: ID!
  name: String!
  email: String
  products: [Product!]!
  createdAt: String!
  updatedAt: String!
}

enum OrderStatus {
  NEW
  PENDING
  PENDING_PAYMENT
  PAID
  PROCESSING
  SHIPPED
  COMPLETED
  CANCELLED
  REFUNDED
}

type Order {
  id: ID!
  customerName: String!
  email: String!
  total: Float!
  status: OrderStatus!
  checkoutLinkId: ID
  checkoutLink: CheckoutLink
  storeId: ID
  store: Store
  productId: ID!
  product: Product!
  quantity: Int!
  shippingNote: String
  shippingAddress: String!
  createdAt: String!
}

type Query {
  health: String!
  products: [Product!]!
  product(id: ID!): Product
  stores: [Store!]!
  checkoutLink(slug: String!): CheckoutLink
  orders(storeId: ID!): [Order!]!
  order(id: ID!): Order
}

type Mutation {
  addProduct(
    name: String!
    price: Float!
    storeId: ID!
    description: String
    imageUrl: String
    quantity: Int
  ): Product!

  updateProduct(
    id: ID!
    price: Float!
    description: String
    imageUrl: String
    quantity: Int
  ): Product!

  createStore(input: StoreInput!): Store!
  createCheckoutLink(input: CheckoutLinkInput!): CheckoutLink!
  checkoutByLink(input: CheckoutByLinkInput!): Order!
  updateOrderStatus(orderId: ID!, status: OrderStatus!): Order!
}
